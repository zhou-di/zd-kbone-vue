# kbone 预研

## 开发步骤

- 设置 Vue 路由
- 建立对应页面并进行小程序页面挂载注册
- 修改小程序入口并配置对应的路由(如果有需要可以继续配置 tabBar)

## 单位
- kbone 没有支持 rpx，取而代之的是可以使用更为传统的 rem 进行开发。
- https://wechat-miniprogram.github.io/kbone/docs/guide/advanced.html#%E4%BD%BF%E7%94%A8-rem
- PS：这个特性只在基础库 2.9.0 及以上版本支持。

## 自定义 app生命周期 和 小程序全局样式

- app.js 不属于任何页面，所以没有真正的 window 和 document 对象，所有依赖这两个对象实现的代码在这里无法被直接使用。

## 页面跳转
- window.open相当于 navigateTo，页面打开方式为 open；
- window.location.href相当于redirectTo，页面打开方式为 jump；
- 所以：小程序使用window.open h5使用 window.location.href

## 关于微信原生 api

> kbone-api：kbone-api是一个能同时支持 小程序和 web 开发的多端 api 库。

```bash
# main.js
npm install kbone-api -S
Vue.use(kboneAPI)


# index.vue
this.$api.showToast({
  title: '加载成功'
})
```

## 关于微信原生 组件

```bash
# 下载 kbone-ui
npm install kbone-ui -S

# 加载全部组件内容，并引入 weui 样式库：
import KboneUI from 'kbone-ui'
import 'kbone-ui/lib/weui/weui.css'

# 存在的问题
# 跟页面使用weui，则每一个 main.mp.js 都需要引入 weui相关组件

Vue.use(KboneUI)
```

## 官方demo不严谨各种报错
- weui和官方demo都会出错
- 小程序使用kbone框架出现：Uncaught Error: module "pages/index/miniprogram-render.js" is not defined 